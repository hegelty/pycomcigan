# 컴시간알리미 분석
이 내용은 2023-11-01 기준으로 작성되었습니다.
## 학교 검색
http://comci.kr:4082/ 요청 -> ```\.\/[0-9]+\?[0-9]+l``` 찾기

ex)./193850?99487l 일 때   
http://comci.kr:4082/193850?99487l학교명 (EUC-KR로 URL Encoding)

응답   
```JSON
{
  "학교검색": [
      [24966,"경기","경기북과학고등학교",12045],
  ]
}
```   
1번째 항목이 지역 코드   
4번째 항목이 학교 코드


---------
### 시간표 받아오기
이번주: http://comci.kr:4082/193850?code0_학교코드_0_1 (BASE64)   
다음주: http://comci.kr:4082/193850?code0_학교코드_0_2 (BASE64)   

코드는 http://comci.kr:4082/ 의 응답에서 정규식으로 찾는다.   
| 코드 | 정규식 |substr|
|------|-------|-----|
|0|sc_data\(\'[0-9]+_|[9:-1]|
|1|성명=자료\.자료[0-9]+|[8:]|
|2|자료.자료[0-9]+\[sb\]|[5:-4]
|3|=H시간표\.자료[0-9]+|[8:]|
|4|일일자료=Q자료\(자료\.자료[0-9]+|[14:]|
|5|원자료=Q자료\(자료\.자료[0-9]+|[13:]|

담임 번호/과목 번호는 담임/과목 배열의 index

응답(줄바꿈 공백으로 바꾼 후 파싱하기)
```JSON
{
  "학교명": "학교명",
  "지역명": "지역명",
  "학년도": "학년도",
  "시작일": "그 주의 월요일 날짜(YYYY-MM-DD)",
  "일과시간": [
    "1(1교시 시작시간(hh:mm)",
    "2(hh:mm)",
    ...
  ],
  "자료(코드1)": [
    " *",
    "교사 이름1",
    "교사 이름2",
    ...
  ],
  "자료(코드2)": [
    "",
    "2글자 과목 이름1",
    "2글자 과목 이름2",
    ...
  ],
  "자료(코드3)": "갱신일시(YYYY-MM-DD hh-mm-ss)",
  "자료(코드4)": [
    [],
    [
      [],
      [
        [],
        [
          "0",
          "1학년 1반 월요일 시간표(교사코드(1~2자리)과목코드(2자리), 수업이 없으면 0) 1교시",
          "2교시",
          ...
        ],
        [
          "0",
          "1학년 1반 화요일 시간표 1교시",
          ...
        ],
      ],
      [
        "1학년 2반",
        ...
      ],
    ],
    [
      "2학년",
      ...
    ],
  ],
  "자료(코드5)": [
    "원래 시간표"
  ],
  "학급수": [
    "전체", "1학년", "2학년", "3학년", ...
  ],
  "담임": [
    [
      "1학년 1반 담임 번호(가상반은 담임 255)",
      "1학년 2반 담임 번호",
      ...
    ],
    [
      "2학년 1반",
      ...
    ],
    ...
  ]
}
```